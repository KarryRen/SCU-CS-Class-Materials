----------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  D:\Economitrics\HomeWork\第五次\test.log
  log type:  text
 opened on:  12 Jun 2022, 12:05:09

. use "D:\Economitrics\HomeWork\第五次\nlsy2000.dta"

. 
. ** 2.1 直接回归
. reg lropc00 age00 msa ctrlcity north_central south00 west sch_10 diploma_hs ged_hs smcol bachelor_
> col master_col doctor_col if female==0 & white==1 // 在男性白人中进行回归

      Source |       SS           df       MS      Number of obs   =     1,797
-------------+----------------------------------   F(13, 1783)     =     24.66
       Model |  143.528439        13  11.0406491   Prob > F        =    0.0000
    Residual |  798.329879     1,783  .447745305   R-squared       =    0.1524
-------------+----------------------------------   Adj R-squared   =    0.1462
       Total |  941.858318     1,796  .524419999   Root MSE        =    .66914

-------------------------------------------------------------------------------
      lropc00 |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
--------------+----------------------------------------------------------------
        age00 |   .0084639   .0069758     1.21   0.225    -.0052177    .0221455
          msa |   .1600718   .0562464     2.85   0.004     .0497561    .2703875
     ctrlcity |   .1032963   .0658877     1.57   0.117    -.0259289    .2325215
north_central |  -.1288098    .046762    -2.75   0.006    -.2205239   -.0370956
      south00 |     -.0788   .0482481    -1.63   0.103    -.1734288    .0158288
         west |   -.031213   .0550705    -0.57   0.571    -.1392225    .0767964
       sch_10 |  -.0579826    .090477    -0.64   0.522    -.2354346    .1194695
   diploma_hs |   .1854257   .0573022     3.24   0.001     .0730393    .2978122
       ged_hs |   .0956434   .0901798     1.06   0.289    -.0812258    .2725126
        smcol |   .3823963   .0606107     6.31   0.000     .2635209    .5012717
 bachelor_col |   .6266583   .0619161    10.12   0.000     .5052224    .7480941
   master_col |   .8671423   .0857865    10.11   0.000     .6988898    1.035395
   doctor_col |   1.057246   .1174794     9.00   0.000     .8268341    1.287658
        _cons |   2.122487    .276664     7.67   0.000     1.579867    2.665107
-------------------------------------------------------------------------------

. estimates store male // 保存回归结果

. 
. reg lropc00 age00 msa ctrlcity north_central south00 west sch_10 diploma_hs ged_hs smcol bachelor_
> col master_col doctor_col if female==1 & white==1 // 在女性白人中进行回归

      Source |       SS           df       MS      Number of obs   =     1,748
-------------+----------------------------------   F(13, 1734)     =     29.84
       Model |  134.321308        13  10.3324083   Prob > F        =    0.0000
    Residual |  600.494792     1,734  .346306108   R-squared       =    0.1828
-------------+----------------------------------   Adj R-squared   =    0.1767
       Total |    734.8161     1,747   .42061597   Root MSE        =    .58848

-------------------------------------------------------------------------------
      lropc00 |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
--------------+----------------------------------------------------------------
        age00 |  -.0054106   .0063441    -0.85   0.394    -.0178536    .0070324
          msa |    .187688   .0549421     3.42   0.001     .0799283    .2954478
     ctrlcity |   .2089637   .0624761     3.34   0.001     .0864273       .3315
north_central |  -.1740761   .0429717    -4.05   0.000    -.2583579   -.0897943
      south00 |  -.1446203   .0429005    -3.37   0.001    -.2287624   -.0604782
         west |  -.0197165   .0488866    -0.40   0.687    -.1155994    .0761664
       sch_10 |  -.1801367   .1130961    -1.59   0.111    -.4019559    .0416824
   diploma_hs |   .1039771   .0526757     1.97   0.049     .0006625    .2072916
       ged_hs |  -.0746882    .083587    -0.89   0.372    -.2386302    .0892537
        smcol |   .3134934   .0542217     5.78   0.000     .2071466    .4198402
 bachelor_col |   .5736615   .0565939    10.14   0.000     .4626621    .6846609
   master_col |   .7721463   .0718341    10.75   0.000     .6312557    .9130369
   doctor_col |   1.027662   .1654047     6.21   0.000     .7032487    1.352076
        _cons |    2.40049   .2559333     9.38   0.000     1.898519     2.90246
-------------------------------------------------------------------------------

. estimates store female // 保存回归结果

. 
. oaxaca8 male female, weight(1 0 0.651) notf
(high estimates: male; low estimates: female)

                                                 Mean prediction 1 =  2.843339
                                                 Mean prediction 2 =  2.538099
------------------------------------------------------------------------------
             |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
  difference |   .3052401   .0232167    13.15   0.000     .2597363    .3507439
------------------------------------------------------------------------------

Linear decompositions
------------------------------------------------------------------------------
       Total |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
W=1          |
   explained |  -.0189887    .010135    -1.87   0.061    -.0388529    .0008756
 unexplained |   .3242288   .0216201    15.00   0.000     .2818542    .3666033
-------------+----------------------------------------------------------------
W=0          |
   explained |  -.0158977   .0107569    -1.48   0.139    -.0369808    .0051855
 unexplained |   .3211378   .0217203    14.79   0.000     .2785667    .3637088
-------------+----------------------------------------------------------------
W=,651       |
   explained |  -.0179099   .0098544    -1.82   0.069    -.0372242    .0014044
 unexplained |     .32315   .0214196    15.09   0.000     .2811683    .3651317
------------------------------------------------------------------------------

. 
end of do-file

. do "C:\Users\16332\AppData\Local\Temp\STD9cf0_000000.tmp"

. oaxaca8 male female, weight(0.651) notf
(high estimates: male; low estimates: female)

                                                 Mean prediction 1 =  2.843339
                                                 Mean prediction 2 =  2.538099
------------------------------------------------------------------------------
             |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
  difference |   .3052401   .0232167    13.15   0.000     .2597363    .3507439
------------------------------------------------------------------------------

Linear decomposition
------------------------------------------------------------------------------
       Total |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
W=,651       |
   explained |  -.0179099   .0098544    -1.82   0.069    -.0372242    .0014044
 unexplained |     .32315   .0214196    15.09   0.000     .2811683    .3651317
------------------------------------------------------------------------------

. 
end of do-file

. do "C:\Users\16332\AppData\Local\Temp\STD9cf0_000000.tmp"

. ** 2.2 加一个变量后回归
. 
. replace afqtp89=afqtp89/100.0 // 改变 afqtp89 的单位
variable afqtp89 was byte now float
(7,525 real changes made)

. 
. reg lropc00 age00 msa ctrlcity north_central south00 west sch_10 diploma_hs ged_hs smcol bachelor_
> col master_col doctor_col afqtp89 if female==0 & white==1

      Source |       SS           df       MS      Number of obs   =     1,797
-------------+----------------------------------   F(14, 1782)     =     26.53
       Model |  162.427272        14   11.601948   Prob > F        =    0.0000
    Residual |  779.431046     1,782   .43739116   R-squared       =    0.1725
-------------+----------------------------------   Adj R-squared   =    0.1660
       Total |  941.858318     1,796  .524419999   Root MSE        =    .66136

-------------------------------------------------------------------------------
      lropc00 |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
--------------+----------------------------------------------------------------
        age00 |   .0001876   .0070087     0.03   0.979    -.0135585    .0139337
          msa |    .143368   .0556502     2.58   0.010     .0342214    .2525147
     ctrlcity |    .086009   .0651745     1.32   0.187    -.0418175    .2138354
north_central |  -.1255738   .0462208    -2.72   0.007    -.2162265   -.0349211
      south00 |   -.060275   .0477702    -1.26   0.207    -.1539665    .0334165
         west |  -.0167608   .0544744    -0.31   0.758    -.1236011    .0900796
       sch_10 |  -.0005388   .0898507    -0.01   0.995    -.1767626     .175685
   diploma_hs |   .1199925   .0575039     2.09   0.037     .0072103    .2327746
       ged_hs |   .0484022   .0894203     0.54   0.588    -.1269774    .2237818
        smcol |   .2423387   .0635822     3.81   0.000     .1176352    .3670421
 bachelor_col |   .4176725    .068962     6.06   0.000     .2824175    .5529275
   master_col |   .6277886    .092277     6.80   0.000     .4468061    .8087712
   doctor_col |   .7662294   .1242671     6.17   0.000     .5225048    1.009954
      afqtp89 |   .4496449   .0684049     6.57   0.000     .3154827    .5838072
        _cons |   2.325389   .2751831     8.45   0.000     1.785673    2.865104
-------------------------------------------------------------------------------

. estimates store male

. 
. reg lropc00 age00 msa ctrlcity north_central south00 west sch_10 diploma_hs ged_hs smcol bachelor_
> col master_col doctor_col afqtp89 if female==1 & white==1

      Source |       SS           df       MS      Number of obs   =     1,748
-------------+----------------------------------   F(14, 1733)     =     29.69
       Model |  142.139654        14  10.1528324   Prob > F        =    0.0000
    Residual |  592.676446     1,733  .341994487   R-squared       =    0.1934
-------------+----------------------------------   Adj R-squared   =    0.1869
       Total |    734.8161     1,747   .42061597   Root MSE        =     .5848

-------------------------------------------------------------------------------
      lropc00 |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
--------------+----------------------------------------------------------------
        age00 |   -.009931    .006375    -1.56   0.119    -.0224346    .0025725
          msa |   .1889534   .0545997     3.46   0.001     .0818652    .2960416
     ctrlcity |   .2062287   .0620885     3.32   0.001     .0844523    .3280051
north_central |  -.1710263   .0427081    -4.00   0.000    -.2547912   -.0872615
      south00 |  -.1295043   .0427496    -3.03   0.002    -.2133506    -.045658
         west |  -.0182536   .0485823    -0.38   0.707    -.1135397    .0770325
       sch_10 |   -.153503   .1125278    -1.36   0.173    -.3742076    .0672017
   diploma_hs |   .0700633   .0528251     1.33   0.185    -.0335443    .1736709
       ged_hs |  -.1082893   .0833618    -1.30   0.194    -.2717896     .055211
        smcol |   .2332033   .0564391     4.13   0.000     .1225073    .3438992
 bachelor_col |   .4387545   .0629214     6.97   0.000     .3153447    .5621643
   master_col |   .6206092   .0781049     7.95   0.000     .4674194    .7737989
   doctor_col |   .8480107   .1686115     5.03   0.000     .5173072    1.178714
      afqtp89 |   .3134456   .0655563     4.78   0.000     .1848679    .4420234
        _cons |    2.47975   .2548747     9.73   0.000     1.979856    2.979645
-------------------------------------------------------------------------------

. estimates store female

. 
. oaxaca8 male female, weight(1 0 0.651) notf
(high estimates: male; low estimates: female)

                                                 Mean prediction 1 =  2.843339
                                                 Mean prediction 2 =  2.538099
------------------------------------------------------------------------------
             |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
  difference |   .3052401   .0232247    13.14   0.000     .2597204    .3507597
------------------------------------------------------------------------------

Linear decompositions
------------------------------------------------------------------------------
       Total |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
W=1          |
   explained |  -.0072278   .0107371    -0.67   0.501    -.0282721    .0138165
 unexplained |   .3124678   .0215062    14.53   0.000     .2703164    .3546193
-------------+----------------------------------------------------------------
W=0          |
   explained |    -.00911   .0111683    -0.82   0.415    -.0309995    .0127794
 unexplained |   .3143501   .0215864    14.56   0.000     .2720415    .3566587
-------------+----------------------------------------------------------------
W=,651       |
   explained |  -.0078847   .0103505    -0.76   0.446    -.0281712    .0124019
 unexplained |   .3131248   .0212668    14.72   0.000     .2714427    .3548068
------------------------------------------------------------------------------

. 
end of do-file

. edit

. do "C:\Users\16332\AppData\Local\Temp\STD9cf0_000000.tmp"

. replace afqtp89=afqtp89/100.0 // 改变 afqtp89 的单位
(7,525 real changes made)

. 
. reg lropc00 age00 msa ctrlcity north_central south00 west sch_10 diploma_hs ged_hs smcol bachelor_col master_col doctor_col afqtp89 if female==0 & white==1

      Source |       SS           df       MS      Number of obs   =     1,797
-------------+----------------------------------   F(14, 1782)     =     26.53
       Model |  162.427271        14   11.601948   Prob > F        =    0.0000
    Residual |  779.431047     1,782   .43739116   R-squared       =    0.1725
-------------+----------------------------------   Adj R-squared   =    0.1660
       Total |  941.858318     1,796  .524419999   Root MSE        =    .66136

-------------------------------------------------------------------------------
      lropc00 |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
--------------+----------------------------------------------------------------
        age00 |   .0001876   .0070087     0.03   0.979    -.0135585    .0139337
          msa |    .143368   .0556502     2.58   0.010     .0342214    .2525147
     ctrlcity |    .086009   .0651745     1.32   0.187    -.0418175    .2138354
north_central |  -.1255738   .0462208    -2.72   0.007    -.2162265   -.0349211
      south00 |   -.060275   .0477702    -1.26   0.207    -.1539665    .0334165
         west |  -.0167608   .0544744    -0.31   0.758    -.1236011    .0900796
       sch_10 |  -.0005388   .0898507    -0.01   0.995    -.1767626     .175685
   diploma_hs |   .1199925   .0575039     2.09   0.037     .0072103    .2327746
       ged_hs |   .0484022   .0894203     0.54   0.588    -.1269774    .2237818
        smcol |   .2423387   .0635822     3.81   0.000     .1176352    .3670421
 bachelor_col |   .4176725    .068962     6.06   0.000     .2824175    .5529275
   master_col |   .6277886    .092277     6.80   0.000     .4468061    .8087712
   doctor_col |   .7662295   .1242671     6.17   0.000     .5225048    1.009954
      afqtp89 |   44.96449    6.84049     6.57   0.000     31.54827    58.38072
        _cons |   2.325389   .2751831     8.45   0.000     1.785673    2.865104
-------------------------------------------------------------------------------

. estimates store male

. 
. reg lropc00 age00 msa ctrlcity north_central south00 west sch_10 diploma_hs ged_hs smcol bachelor_col master_col doctor_col afqtp89 if female==1 & white==1

      Source |       SS           df       MS      Number of obs   =     1,748
-------------+----------------------------------   F(14, 1733)     =     29.69
       Model |  142.139654        14  10.1528324   Prob > F        =    0.0000
    Residual |  592.676446     1,733  .341994487   R-squared       =    0.1934
-------------+----------------------------------   Adj R-squared   =    0.1869
       Total |    734.8161     1,747   .42061597   Root MSE        =     .5848

-------------------------------------------------------------------------------
      lropc00 |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
--------------+----------------------------------------------------------------
        age00 |   -.009931    .006375    -1.56   0.119    -.0224346    .0025725
          msa |   .1889534   .0545997     3.46   0.001     .0818652    .2960416
     ctrlcity |   .2062287   .0620885     3.32   0.001     .0844523    .3280051
north_central |  -.1710263   .0427081    -4.00   0.000    -.2547912   -.0872615
      south00 |  -.1295043   .0427496    -3.03   0.002    -.2133506    -.045658
         west |  -.0182536   .0485823    -0.38   0.707    -.1135397    .0770325
       sch_10 |   -.153503   .1125278    -1.36   0.173    -.3742076    .0672017
   diploma_hs |   .0700633   .0528251     1.33   0.185    -.0335443     .173671
       ged_hs |  -.1082893   .0833618    -1.30   0.194    -.2717896     .055211
        smcol |   .2332033   .0564391     4.13   0.000     .1225073    .3438992
 bachelor_col |   .4387545   .0629214     6.97   0.000     .3153447    .5621643
   master_col |   .6206092   .0781049     7.95   0.000     .4674194    .7737989
   doctor_col |   .8480107   .1686115     5.03   0.000     .5173072    1.178714
      afqtp89 |   31.34456   6.555629     4.78   0.000     18.48679    44.20234
        _cons |    2.47975   .2548747     9.73   0.000     1.979856    2.979645
-------------------------------------------------------------------------------

. estimates store female

. 
. oaxaca8 male female, weight(1 0 0.651) detail notf
(high estimates: male; low estimates: female)

                                                 Mean prediction 1 =  2.843339
                                                 Mean prediction 2 =  2.538099
------------------------------------------------------------------------------
             |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
  difference |   .3052401   .0232247    13.14   0.000     .2597204    .3507597
------------------------------------------------------------------------------

Linear decompositions
-------------------------------------------------------------------------------
          W=1 |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
--------------+----------------------------------------------------------------
explained     |
        age00 |  -.0000493   .0019176    -0.03   0.979    -.0038077     .003709
          msa |  -.0023735   .0024417    -0.97   0.331    -.0071591    .0024121
     ctrlcity |  -.0001287   .0013863    -0.09   0.926    -.0028458    .0025883
north_central |  -.0027327   .0023482    -1.16   0.245    -.0073352    .0018697
      south00 |   .0013569   .0016187     0.84   0.402    -.0018157    .0045296
         west |   .0001075   .0008008     0.13   0.893    -.0014621    .0016771
       sch_10 |  -.0000144   .0024616    -0.01   0.995    -.0048391    .0048102
   diploma_hs |   .0002704   .0021009     0.13   0.898    -.0038473    .0043882
       ged_hs |   .0001342   .0007329     0.18   0.855    -.0013022    .0015706
        smcol |  -.0089683   .0042809    -2.09   0.036    -.0173587   -.0005779
 bachelor_col |  -.0003298   .0056013    -0.06   0.953    -.0113082    .0106487
   master_col |  -.0091809   .0052277    -1.76   0.079    -.0194269    .0010651
   doctor_col |   .0109189   .0036301     3.01   0.003      .003804    .0180338
      afqtp89 |    .003762    .004395     0.86   0.392     -.004852    .0123761
        Total |  -.0072278   .0107371    -0.67   0.501    -.0282721    .0138165
--------------+----------------------------------------------------------------
unexplained   |
        age00 |   .3914134   .3664907     1.07   0.286    -.3268952    1.109722
          msa |   -.034189    .058479    -0.58   0.559    -.1488057    .0804277
     ctrlcity |  -.0213204   .0160226    -1.33   0.183    -.0527242    .0100834
north_central |   .0147435   .0204316     0.72   0.471    -.0253017    .0547886
      south00 |   .0232481   .0215538     1.08   0.281    -.0189967    .0654928
         west |   .0002596   .0127114     0.02   0.984    -.0246542    .0251734
       sch_10 |   .0028878   .0028033     1.03   0.303    -.0026065     .008382
   diploma_hs |   .0162527   .0254389     0.64   0.523    -.0336066     .066112
       ged_hs |   .0064541   .0051234     1.26   0.208    -.0035875    .0164958
        smcol |   .0023309   .0217106     0.11   0.915     -.040221    .0448828
 bachelor_col |  -.0040524    .017967    -0.23   0.822    -.0392671    .0311624
   master_col |   .0004805   .0081242     0.06   0.953    -.0154426    .0164037
   doctor_col |   -.000655   .0017448    -0.38   0.707    -.0040747    .0027647
      afqtp89 |   .0689754   .0479943     1.44   0.151    -.0250916    .1630425
        _cons |  -.1543613   .3750825    -0.41   0.681    -.8895094    .5807868
        Total |   .3124678   .0215062    14.53   0.000     .2703164    .3546193
-------------------------------------------------------------------------------
-------------------------------------------------------------------------------
          W=0 |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
--------------+----------------------------------------------------------------
explained     |
        age00 |   .0026109   .0018993     1.37   0.169    -.0011116    .0063335
          msa |  -.0031282   .0030298    -1.03   0.302    -.0090666    .0028102
     ctrlcity |  -.0003087   .0027614    -0.11   0.911    -.0057209    .0051035
north_central |  -.0037218   .0029458    -1.26   0.206    -.0094955    .0020518
      south00 |   .0029155   .0023513     1.24   0.215    -.0016931     .007524
         west |    .000117   .0007264     0.16   0.872    -.0013067    .0015407
       sch_10 |  -.0041066   .0032133    -1.28   0.201    -.0104046    .0021913
   diploma_hs |   .0001579   .0013879     0.11   0.909    -.0025624    .0028782
       ged_hs |  -.0003002   .0009553    -0.31   0.753    -.0021726    .0015722
        smcol |  -.0086302   .0040115    -2.15   0.031    -.0164927   -.0007678
 bachelor_col |  -.0003464   .0058648    -0.06   0.953    -.0118412    .0111484
   master_col |  -.0090759   .0051079    -1.78   0.076    -.0190873    .0009355
   doctor_col |   .0120843   .0042699     2.83   0.005     .0037155    .0204531
      afqtp89 |   .0026225   .0031167     0.84   0.400    -.0034862    .0087312
        Total |    -.00911   .0111683    -0.82   0.415    -.0309995    .0127794
--------------+----------------------------------------------------------------
unexplained   |
        age00 |   .3887531   .3639999     1.07   0.286    -.3246735     1.10218
          msa |  -.0334343   .0571886    -0.58   0.559    -.1455219    .0786532
     ctrlcity |  -.0211405   .0158864    -1.33   0.183    -.0522773    .0099963
north_central |   .0157326      .0218     0.72   0.470    -.0269946    .0584598
      south00 |   .0216895   .0201108     1.08   0.281    -.0177269     .061106
         west |     .00025    .012243     0.02   0.984    -.0237458    .0242459
       sch_10 |     .00698   .0066518     1.05   0.294    -.0060573    .0200174
   diploma_hs |   .0163652   .0256142     0.64   0.523    -.0338377    .0665681
       ged_hs |   .0068885   .0054597     1.26   0.207    -.0038123    .0175893
        smcol |   .0019928   .0185647     0.11   0.915    -.0343932    .0383789
 bachelor_col |  -.0040357   .0178927    -0.23   0.822    -.0391048    .0310334
   master_col |   .0003756   .0063558     0.06   0.953    -.0120817    .0128328
   doctor_col |  -.0018204   .0047276    -0.39   0.700    -.0110864    .0074456
      afqtp89 |    .070115   .0487893     1.44   0.151    -.0255103    .1657402
        _cons |  -.1543613   .3750825    -0.41   0.681    -.8895094    .5807868
        Total |   .3143501   .0215864    14.56   0.000     .2720415    .3566587
-------------------------------------------------------------------------------
invalid 'ivar' 
                 stata():  3598  Stata returned error
      _b_table::titles():     -  function returned error
_b_table::do_equations():     -  function returned error
_b_table::report_table():     -  function returned error
           _coef_table():     -  function returned error
                 <istmt>:     -  function returned error
r(3598);

end of do-file

r(3598);

. exit, clear
